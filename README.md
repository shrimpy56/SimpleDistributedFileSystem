# Simple Distributed File System

```java
@author = Jia Li, Renjie Li
```

## usage

1. compile and set the permission for the shell files

```bash
make clean; make
chmod +x run.sh
chmod +x auto_test.sh
```

2. start the Coordinator first, and then run FileServers on different machines

```bash
./run.sh Coordinator 9999 4 4 7
# set Nr=4, Nw=4, N=7 (include the Coordinator), we run it on atlas.cselabs.umn.edu
./run.sh Server atlas.cselabs.umn.edu 9999 10000
# we run it on csel-kh4250-01.cselabs.umn.edu
./run.sh Server atlas.cselabs.umn.edu 9999 10001
# we run it on csel-kh4250-02.cselabs.umn.edu
./run.sh Server atlas.cselabs.umn.edu 9999 10002
# we run it on csel-kh4250-03.cselabs.umn.edu
./run.sh Server atlas.cselabs.umn.edu 9999 10003
# we run it on csel-kh4250-04.cselabs.umn.edu
./run.sh Server atlas.cselabs.umn.edu 9999 10004
# we run it on csel-kh4250-05.cselabs.umn.edu
./run.sh Server atlas.cselabs.umn.edu 9999 10005
# we run it on csel-kh4250-06.cselabs.umn.edu
```

3. run the Client with all FileServers. UI mode.

```bash
./run.sh Client ../Servers.txt 7 UI
```

4. follow the instruction of Client, then the test result will be print on the terminal.For details, please refer to `Design.md`.

5. test automaticly

```bash
./auto_test.sh
```

> the shell file will open three shell terminal and run three Clients.
>
> It is designed for the read-heavy/write-heavy part.
>
> If you want to change the read/write time, just change those numbers in `auto_test.sh` file.

## structure

* `src/`: source files
    * `Client.java`: client, you can run it in UI or automaticly
    * `FileServer.java`(generated by thrift), `FileServerHandler.java`, `Server.java`: FileServer part
    * `Coordinator.java`, `CoordinatorHandler.java`: Coordinator(also a FileServer)
    * `FileServer.thrift`: used for generating interfaces
* `doc/`
    * `Design.md`: the design of each `.java` file
    * `Evaluation.md`: test cases
    * `pic`: pictures for document
* `Makefile`, `run.sh`, `auto_test.sh`: can be helpful for testing/debugging
* `Servers.txt` 
* `README.md`: this file
* `data/`: will be generated by FileServer, storing files. Each FileServer will have one directory.
* `class/`: .class files after compiling
